{"ast":null,"code":"import _slicedToArray from \"C:/Users/Alias/weboldal/web-login/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"C:/Users/Alias/weboldal/web-login/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\nvar __spreadValues = function __spreadValues(a, b) {\n  for (var prop in b || (b = {})) {\n    if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  if (__getOwnPropSymbols) {\n    var _iterator = _createForOfIteratorHelper(__getOwnPropSymbols(b)),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var prop = _step.value;\n        if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  return a;\n};\nvar __spreadProps = function __spreadProps(a, b) {\n  return __defProps(a, __getOwnPropDescs(b));\n};\nvar __objRest = function __objRest(source, exclude) {\n  var target = {};\n  for (var prop in source) {\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n  }\n  if (source != null && __getOwnPropSymbols) {\n    var _iterator2 = _createForOfIteratorHelper(__getOwnPropSymbols(source)),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var prop = _step2.value;\n        if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n  return target;\n};\nimport { useQuery, useSubscription, ApolloClient, InMemoryCache, ApolloProvider } from \"@apollo/client\";\nimport { useAuthenticated } from \"@nhost/react\";\nimport React, { useState, useEffect } from \"react\";\nimport { createApolloClient } from \"@nhost/apollo\";\nfunction useAuthQuery(query, options) {\n  var isAuthenticated = useAuthenticated();\n  var newOptions = __spreadProps(__spreadValues({}, options), {\n    skip: (options == null ? void 0 : options.skip) || !isAuthenticated\n  });\n  return useQuery(query, newOptions);\n}\nfunction useAuthSubscription(subscription, options) {\n  var isAuthenticated = useAuthenticated();\n  var newOptions = __spreadProps(__spreadValues({}, options), {\n    skip: (options == null ? void 0 : options.skip) || !isAuthenticated\n  });\n  return useSubscription(subscription, newOptions);\n}\nvar mockApolloClient = new ApolloClient({\n  cache: new InMemoryCache()\n});\nvar NhostApolloProvider = function NhostApolloProvider(_a) {\n  var _b = _a,\n    children = _b.children,\n    options = __objRest(_b, [\"children\"]);\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    client = _useState2[0],\n    setClient = _useState2[1];\n  useEffect(function () {\n    if (!client) {\n      setClient(createApolloClient(options));\n    }\n  }, []);\n  return /* @__PURE__ */React.createElement(ApolloProvider, {\n    client: client || mockApolloClient\n  }, children);\n};\nexport { NhostApolloProvider, useAuthQuery, useAuthSubscription };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWO,sBACLA,OACAC,SACA;EACA,IAAMC,kBAAkBC;EACxB,IAAMC,aAAaC,iCAAKJ,UAAL;IAAcK,MAAM,oCAASA,SAAQ,CAACJ;EAAA;EAClD,gBAASF,OAAOI,UAAU;AACnC;AAEO,6BACLG,cACAN,SACA;EACA,IAAMC,kBAAkBC;EACxB,IAAMC,aAAyDC,iCAC1DJ,UAD0D;IAE7DK,MAAM,oCAASA,SAAQ,CAACJ;EAAA;EAGnB,uBAAgBK,cAAcH,UAAU;AACjD;ACvBA,IAAMI,mBAAmB,IAAIC,aAAa;EAAEC,OAAO,IAAIC;AAAA,CAAiB;AAEjE,IAAMC,sBAA6E,SAA7EA,oBAA8EC,IAGrF;EAHqF;IACzFC,WADyFC,GACzFD;IACGb,oBAFsFc,IAEtF,CADH;EAIM,gBAAsBC,UAAgD;IAAA;IAArEC;IAAQC;EAKfC,UAAU,YAAM;IACd,IAAI,CAACF,QAAQ;MACDC,6BAAmBjB,OAAO,CAAC;IACvC;EAGF,GAAG,EAAE;EAEL,OAAQ;IAAegB,QAAQA,UAAUT;EAAA,GAAmBM,QAAS;AACvE","names":["query","options","isAuthenticated","useAuthenticated","newOptions","__spreadProps","skip","subscription","mockApolloClient","ApolloClient","cache","InMemoryCache","NhostApolloProvider","_a","children","_b","useState","client","setClient","useEffect"],"sources":["C:\\Users\\Alias\\weboldal\\web-login\\node_modules\\@nhost\\react-apollo\\src\\hooks.tsx","C:\\Users\\Alias\\weboldal\\web-login\\node_modules\\@nhost\\react-apollo\\src\\provider.tsx"],"sourcesContent":["import {\n  DocumentNode,\n  OperationVariables,\n  QueryHookOptions,\n  SubscriptionHookOptions,\n  TypedDocumentNode,\n  useQuery,\n  useSubscription\n} from '@apollo/client'\nimport { useAuthenticated } from '@nhost/react'\n\nexport function useAuthQuery<TData = any, TVariables = OperationVariables>(\n  query: DocumentNode | TypedDocumentNode<TData, TVariables>,\n  options?: QueryHookOptions<TData, TVariables>\n) {\n  const isAuthenticated = useAuthenticated()\n  const newOptions = { ...options, skip: options?.skip || !isAuthenticated }\n  return useQuery(query, newOptions)\n}\n\nexport function useAuthSubscription<TData = any, TVariables = OperationVariables>(\n  subscription: DocumentNode | TypedDocumentNode<TData, TVariables>,\n  options?: SubscriptionHookOptions<TData, TVariables>\n) {\n  const isAuthenticated = useAuthenticated()\n  const newOptions: SubscriptionHookOptions<TData, TVariables> = {\n    ...options,\n    skip: options?.skip || !isAuthenticated\n  }\n\n  return useSubscription(subscription, newOptions)\n}\n\n// TODO consider other hooks\n/*\n- useAuthLazyQuery\n- useAuthMutation\n- useRoleQuery\n- useRoleLazyQuery\n- useRoleMutation\n- useRoleSubscription\n*/\n","import React, { PropsWithChildren, useEffect, useState } from 'react'\n\nimport { ApolloClient, ApolloProvider, InMemoryCache } from '@apollo/client'\nimport { createApolloClient, NhostApolloClientOptions } from '@nhost/apollo'\n\n// This is needed because ApolloProvider can't be rendered without a client. To be able to render\n// the children without our client, we need an ApolloProvider because of potential underlying\n// useQuery hooks in customer applications. This way ApolloProvider and children can be rendered.\nconst mockApolloClient = new ApolloClient({ cache: new InMemoryCache() })\n\nexport const NhostApolloProvider: React.FC<PropsWithChildren<NhostApolloClientOptions>> = ({\n  children,\n  ...options\n}) => {\n  // * See https://github.com/nhost/nhost/pull/214#pullrequestreview-889730478\n  const [client, setClient] = useState<ReturnType<typeof createApolloClient>>()\n\n  // Note: Because we're using XState under the hood, we need to make sure to start the interpreter\n  // on the client side when the component is mounted. This is why we're using `useState` and\n  // `useEffect`.\n  useEffect(() => {\n    if (!client) {\n      setClient(createApolloClient(options))\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return <ApolloProvider client={client || mockApolloClient}>{children}</ApolloProvider>\n}\n"]},"metadata":{},"sourceType":"module"}